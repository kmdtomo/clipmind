# 技術コンテキスト: ClipMind

## 主要技術スタック

*   **フレームワーク:** Electron (v28以降推奨) - Mac OSデスクトップアプリケーションの基盤
*   **UIライブラリ:** React (v18以降) + Vite - 高速な開発サーバーとビルドプロセスを提供
*   **言語:** TypeScript - 静的型付けによる開発効率とコード品質の向上
*   **AI連携:** Dify (推奨) または OpenAI API (GPT-4等) - コンテキスト認識型補完、テキスト生成・処理
*   **ローカルデータ永続化 (Phase 1-3):** `electron-store` - 設定やクリップボード履歴、定型文などのシンプルなJSONベースのデータ保存
*   **クラウドデータベース (Phase 4):** Supabase または Firebase (検討) - デバイス間同期、ユーザー認証
*   **スタイリング:** Tailwind CSS (現在のプロジェクト構成に基づく) - ユーティリティファーストなCSSフレームワーク
*   **パッケージマネージャー:** pnpm (現在のプロジェクト構成に基づく) - 高速で効率的な依存関係管理

## 開発環境

*   **OS:** macOS (開発および主要ターゲット)
*   **ランタイム:** Node.js (LTSバージョン推奨)
*   **エディタ:** Visual Studio Code (推奨)
*   **バージョン管理:** Git

## 技術的な制約と課題

*   **プラットフォーム依存:** Phase 1-3はMac OSに限定。ネイティブ機能（グローバルショートカット、アクティブウィンドウ/UI要素の取得）の実装はmacOS固有のAPIに依存する可能性がある（例: Accessibility API）。
*   **Electronプロセスモデル:** MainプロセスとRendererプロセスの役割分担、およびPreloadスクリプトを介した安全なIPC通信の設計が重要。
*   **パフォーマンス:**
    *   **APIレイテンシ:** AI APIの応答速度がユーザー体験に影響を与えるため、プリフェッチ、キャッシング、二段階表示などの最適化が必須。
    *   **リソース消費:** Electronアプリはメモリ消費量が比較的大きくなる傾向があるため、最適化が必要。
*   **セキュリティ:**
    *   **APIキー管理:** Dify/OpenAI APIキーを安全に管理する必要がある（Mainプロセスでの管理、難読化など）。
    *   **コード署名と公証 (Phase 3):** Mac App Store配布や信頼性確保のために、Apple Developer Programへの登録と適切な署名・公証プロセスが必要。
*   **ネイティブ機能連携:**
    *   **グローバルショートカット:** 他のアプリケーションとの競合を避ける設定が必要。
    *   **アクティブ要素の検出:** アプリケーションやUIフレームワークによっては、アクティブなフォーム要素の正確な特定が困難な場合がある。Accessibility APIなどの利用を検討。
*   **データ同期 (Phase 4):** クラウドDB導入時の競合解決、オフラインサポート、リアルタイム同期の実装が課題。

## 主要な依存関係

*   **Electron:** アプリケーションのコアフレームワーク。
*   **React & ReactDOM:** UI構築ライブラリ。
*   **Vite:** フロントエンドのビルドツールと開発サーバー。
*   **electron-store:** ローカルデータストレージ。
*   **Dify/OpenAI SDK:** AI機能連携用ライブラリ。
*   **macOS固有ライブラリ (必要に応じて):** グローバルショートカット (`globalShortcut`)、クリップボード監視 (`clipboard`)、アクティブウィンドウ情報取得などのためのElectron APIまたはサードパーティライブラリ。
*   **将来的な依存関係:** Supabase/Firebase SDK、認証ライブラリなど。
